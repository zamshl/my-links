<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>معلومات الجهاز - الصفحة الأولى</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        input[type="file"] {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>جمع المعلومات ورفع الصور</h1>
    <form id="dataForm">
        <input type="file" id="imageInput" accept="image/*" multiple>
        <p>اختر الصور التي تريد رفعها (يمكنك اختيار أكثر من صورة).</p>
        <button type="submit">إرسال البيانات</button>
    </form>

    <script>
        function getDeviceInfo() {
            const userAgent = navigator.userAgent;
            const os = userAgent.includes("Windows") ? "Windows" :
                       userAgent.includes("Mac") ? "MacOS" :
                       userAgent.includes("Linux") ? "Linux" :
                       userAgent.includes("Android") ? "Android" :
                       userAgent.includes("iPhone") ? "iOS" : "غير معروف";

            const screenResolution = `${screen.width}x${screen.height}`;
            const language = navigator.language || "غير معروف";

            return {
                os,
                screenResolution,
                language
            };
        }

        async function getBatteryInfo() {
            return navigator.getBattery().then(battery => {
                return {
                    level: (battery.level * 100) + "%",
                    charging: battery.charging ? "نعم" : "لا"
                };
            }).catch(() => null);
        }

        document.getElementById("dataForm").addEventListener("submit", async function (event) {
            event.preventDefault();

            // جمع معلومات الجهاز
            const deviceInfo = getDeviceInfo();
            const batteryInfo = await getBatteryInfo();

            // معالجة الصور
            const imageInput = document.getElementById("imageInput");
            const images = Array.from(imageInput.files).map(file => {
                return {
                    name: file.name,
                    size: file.size,
                    type: file.type
                };
            });

            // دمج البيانات
            const data = {
                ...deviceInfo,
                battery: batteryInfo,
                images
            };

            // حفظ البيانات في LocalStorage
            localStorage.setItem("deviceInfo", JSON.stringify(data));

            // إعادة توجيه المستخدم للصفحة الجديدة
            window.location.href = "new-page.html";
        });
    </script>
</body>
</html>
